<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>èª‡èª‡éƒ¨éšŠç½·å…æ”¶ä»¶è¨ˆæ•¸å™¨</title>
  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      background: linear-gradient(to bottom, #e9f2e3, #f7e9d3); /* æŸ”å’Œç¶ â†’ç±³è†šè‰² */
      color: #333;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
    }

    .container {
      max-width: 800px;
      width: 100%;
      padding: 1em;
      background-color: #fff0f5; /* æ·¡ç²‰ç´…ï¼Œå¯æ ¹æ“šå–œå¥½èª¿æ•´ */
      border-radius: 20px;        /* å¯é¸ï¼šè®“ container æœ‰é»åœ“è§’æ›´æº«æŸ” */
    }

    h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 1em;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
      gap: 1em;
    }

    @media (min-width: 768px) {
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .card {
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 1em;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .card h2 {
      font-size: 1.2em;
      margin: 0 0 0.5em 0;
      text-align: center;
    }

    .counter-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1em;
    }

    .counter-row button {
      font-size: 1.9em;
      padding: 0.9em 1.4em;
      border: none;
      border-radius: 10px;
      background-color: #ffda79;
      cursor: pointer;
    }

    .counter-row button:hover {
      border: 2px solid #ff9800;
      /* åŠ ä¸Šæ©˜è‰²é‚Šæ¡†æˆ–ä½ å–œæ­¡çš„é¡è‰² */
      background-color: #ffe0b2;
      /* å¯é¸ï¼šè®“èƒŒæ™¯è‰²ç¨å¾®è®Šäº®æ›´æœ‰äº’å‹•æ„Ÿ */
    }

    .counter-row input {
      width: 50px;
      text-align: center;
      font-size: 1.8em;
      /* å­—é«”åŠ å¤§ */
      padding: 0.7em 0.9em;
      /* å¢åŠ å…§è· */
      border-radius: 10px;
      /* åŠ ä¸Šåœ“è§’ */
      border: 1px solid #ccc;
      /* å¯é¸ï¼šåŠ ä¸Šé‚Šæ¡†è®“å®ƒæ›´æ¸…æ¥š */
    }

    .generate-btn {
      width: 100%;
      padding: 1em;
      font-size: 1.2em;
      background-color: #ffb6b9;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      margin-top: 2em;
    }

    .report {
      background-color: #e0f7fa;
      border-radius: 10px;
      padding: 1em;
      margin-top: 2em;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>èª‡èª‡éƒ¨éšŠç½·å…æ”¶ä»¶è¨ˆæ•¸å™¨</h1>
    <div id="cards" class="grid"></div>
    <button class="generate-btn" onclick="generateReport()">ç”¢ç”Ÿå ±è¡¨</button>
    <div id="report" class="report"></div>
  </div>

  <script>
    const data = [];

    async function init() {
      const res = await fetch('personData.json');
      const json = await res.json();
      const grouped = {};

      json.forEach(person => {
        const match = person.name.match(/^(.*?[å¸‚ç¸£])(.+)$/);
        if (!match) return;
        const area = match[1];
        const name = match[2];
        if (!grouped[area]) grouped[area] = [];
        grouped[area].push({ name, fullName: person.name });
      });

      const cardsContainer = document.getElementById('cards');

      for (const area in grouped) {
        const title = document.createElement('h2');
        title.textContent = 'ğŸ’¡' + area;
        title.style.marginTop = '1em';
        title.style.gridColumn = '1 / -1';
        cardsContainer.appendChild(title);

        grouped[area].forEach((p, index) => {
          const card = document.createElement('div');
          card.className = 'card';

          const h2 = document.createElement('h2');
          h2.textContent = p.name;
          card.appendChild(h2);

          const row = document.createElement('div');
          row.className = 'counter-row';

          const minusBtn = document.createElement('button');
          minusBtn.textContent = '-';
          const input = document.createElement('input');
          input.type = 'number';
          input.value = 0;
          input.min = 0;
          input.id = p.fullName;
          const plusBtn = document.createElement('button');
          plusBtn.textContent = '+';

          minusBtn.onclick = () => {
            input.value = Math.max(0, parseInt(input.value) - 1);
          };
          plusBtn.onclick = () => {
            input.value = parseInt(input.value) + 1;
          };

          row.appendChild(minusBtn);
          row.appendChild(input);
          row.appendChild(plusBtn);

          card.appendChild(row);
          cardsContainer.appendChild(card);
        });
      }
    }

    function generateReport() {
      const reportDiv = document.getElementById('report');
      reportDiv.innerHTML = '<h2>èª‡èª‡éƒ¨éšŠ</h2>';
      const inputs = document.querySelectorAll('input');
      const result = {};

      inputs.forEach(input => {
        const count = parseInt(input.value);
        if (count > 0) {
          const match = input.id.match(/^(.*?[å¸‚ç¸£])(.+)$/);
          if (!match) return;
          const area = match[1];
          const name = match[2];
          if (!result[area]) result[area] = [];
          result[area].push(`${name} + ${count}`);
        }
      });

      for (const area in result) {
        const p = document.createElement('p');
        p.innerHTML = 'â–«ï¸' + area + '<br>' + result[area].join('<br>');
        reportDiv.appendChild(p);
      }

      // éš¨æ©Ÿæ’å…¥ä¸€å¼µåœ–ç‰‡
      const img = document.createElement('img');
      const randomIndex = Math.floor(Math.random() * 7) + 1; // å‡è¨­ä½ æœ‰ 7 å¼µåœ–ï¼Œæª”åç‚º 01.jpg ~ 07.jpg
      img.src = `images/ComplimentSquad/0${randomIndex}.jpg`;
      img.alt = 'èª‡èª‡éƒ¨éšŠåŠ æ²¹åœ–';
      img.style.width = '100%';
      img.style.borderRadius = '15px';
      img.style.marginTop = '1em';
      reportDiv.appendChild(img);
    }

    init();
  </script>
</body>

</html>